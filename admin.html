<!DOCTYPE html>
<html lang="nl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Portfolio Admin - Project Management</title>
  
  <!-- Bootstrap CSS -->
  <link href="vendor/bootstrap/bootstrap.min.css" rel="stylesheet">
  
  <!-- Icon Libraries -->
  <link rel="stylesheet" href="https://cdn.linearicons.com/free/1.0.0/icon-font.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  
  <!-- Custom CSS -->
  <link href="css/style.min.css" rel="stylesheet">
  
  <!-- Admin specific styles -->
  <style>
    /* Base styles matching portfolio design */
    body {
      background: #f5f8fd url("img/intro-bg.jpg") center top no-repeat;
      background-size: cover;
      font-family: "Open Sans", sans-serif;
      color: #444;
      min-height: 100vh;
    }
    
    /* Background overlay for admin */
    body::before {
      content: '';
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(245, 248, 253, 0.95);
      z-index: -1;
    }
    
    .admin-container {
      min-height: 100vh;
      padding: 20px 0;
    }
    
    /* Admin header matching visual-card style */
    .admin-header {
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(10px);
      border-radius: 15px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
      border: none;
      margin-bottom: 30px;
      padding: 30px;
      transition: transform 0.3s ease, box-shadow 0.3s ease;
    }
    
    .admin-header:hover {
      transform: translateY(-5px);
      box-shadow: 0 15px 40px rgba(0, 0, 0, 0.2);
    }
    
    /* Admin cards matching visual-card style */
    .admin-card {
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(10px);
      border-radius: 15px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
      border: none;
      margin-bottom: 30px;
      transition: transform 0.3s ease, box-shadow 0.3s ease;
    }
    
    .admin-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 15px 40px rgba(0, 0, 0, 0.2);
    }
    
    /* Card headers matching portfolio theme */
    .card-header {
      background: hsl(312, 100%, 50%);
      color: white;
      border-radius: 15px 15px 0 0 !important;
      border: none;
      padding: 20px;
    }
    
    .card-header h3 {
      color: white !important;
      margin: 0;
      font-family: "Montserrat", sans-serif;
      font-weight: 600;
    }
    
    /* Form elements matching portfolio style */
    .form-control, .form-select {
      border-radius: 8px;
      border: 2px solid #e9ecef;
      padding: 12px 15px;
      transition: all 0.3s ease;
      font-family: "Open Sans", sans-serif;
    }
    
    .form-control:focus, .form-select:focus {
      border-color: #1bb1dc;
      box-shadow: 0 0 0 0.2rem rgba(27, 177, 220, 0.25);
      outline: none;
    }
    
    /* Button styles matching portfolio theme */
    .btn-primary {
      background: #1bb1dc;
      border-color: #1bb1dc;
      border-radius: 8px;
      padding: 12px 25px;
      font-weight: 600;
      font-family: "Montserrat", sans-serif;
      text-transform: uppercase;
      letter-spacing: 1px;
      font-size: 13px;
      transition: all 0.3s ease;
    }
    
    .btn-primary:hover {
      background: #0a98c0;
      border-color: #0a98c0;
      transform: translateY(-2px);
      box-shadow: 0 8px 25px rgba(27, 177, 220, 0.3);
    }
    
    .btn-secondary {
      background: #6c757d;
      border-color: #6c757d;
      border-radius: 8px;
      padding: 12px 25px;
      font-weight: 600;
      font-family: "Montserrat", sans-serif;
      text-transform: uppercase;
      letter-spacing: 1px;
      font-size: 13px;
      transition: all 0.3s ease;
    }
    
    .btn-outline-primary {
      color: #1bb1dc;
      border-color: #1bb1dc;
      background-color: white;
      border-radius: 8px;
      padding: 12px 25px;
      font-weight: 600;
      font-family: "Montserrat", sans-serif;
      text-transform: uppercase;
      letter-spacing: 1px;
      font-size: 13px;
      transition: all 0.3s ease;
    }
    
    .btn-outline-primary:hover {
      background: #1bb1dc;
      border-color: #1bb1dc;
      color: white !important;
    }
    
    .btn-outline-light {
      color: white;
      background-color: rgba(255, 255, 255, 0.2);
      border-color: rgba(255, 255, 255, 0.3);
      border-radius: 6px;
      font-size: 12px;
      padding: 8px 15px;
      font-weight: 600;
      transition: all 0.3s ease;
    }
    
    .btn-outline-light:hover {
      background-color: rgba(255, 255, 255, 0.3);
      border-color: rgba(255, 255, 255, 0.5);
      color: white !important;
    }
    
    .btn-outline-danger {
      color: #dc3545;
      background-color: white;
      border-color: #dc3545;
      border-radius: 8px;
      padding: 12px 25px;
      font-weight: 600;
      font-family: "Montserrat", sans-serif;
      text-transform: uppercase;
      letter-spacing: 1px;
      font-size: 13px;
      transition: all 0.3s ease;
    }
    
    .btn-outline-danger:hover {
      background: #dc3545;
      border-color: #dc3545;
      color: white !important;
    }
    
    .btn-outline-info {
      color: #17a2b8;
      background-color: white;
      border-color: #17a2b8;
      border-radius: 6px;
      padding: 8px 15px;
      font-weight: 600;
      transition: all 0.3s ease;
    }
    
    .btn-outline-info:hover {
      background: #17a2b8;
      border-color: #17a2b8;
      color: white !important;
    }
    
    .btn-outline-success {
      color: #28a745;
      background-color: white;
      border-color: #28a745;
      border-radius: 6px;
      padding: 8px 15px;
      font-weight: 600;
      transition: all 0.3s ease;
    }
    
    .btn-outline-success:hover {
      background: #28a745;
      border-color: #28a745;
      color: white !important;
    }
    
    .btn-danger {
      background: #dc3545;
      border-color: #dc3545;
      color: white;
      border-radius: 6px;
      padding: 8px 15px;
      font-weight: 600;
      transition: all 0.3s ease;
    }
    
    .btn-danger:hover {
      background: #c82333;
      border-color: #bd2130;
      color: white !important;
    }
    
    .btn-success {
      background: #28a745;
      border-color: #28a745;
      color: white;
      border-radius: 6px;
      padding: 8px 15px;
      font-weight: 600;
      transition: all 0.3s ease;
    }
    
    .btn-success:hover {
      background: #218838;
      border-color: #1e7e34;
      color: white !important;
    }
    
    .btn-info {
      background: #17a2b8;
      border-color: #17a2b8;
      color: white;
      border-radius: 6px;
      padding: 8px 15px;
      font-weight: 600;
      transition: all 0.3s ease;
    }
    
    .btn-info:hover {
      background: #138496;
      border-color: #117a8b;
      color: white !important;
    }
    
    /* Small button variations */
    .btn-sm {
      padding: 6px 12px;
      font-size: 12px;
      font-weight: 600;
      border-width: 2px;
    }
    
    /* Ensure text is always visible */
    .btn {
      text-shadow: none;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }
    
    .btn:focus,
    .btn:active {
      box-shadow: 0 0 0 0.2rem rgba(0, 0, 0, 0.1);
    }
    
    /* Filter buttons specific styling */
    .enhanced-filter .filter-btn {
      background: white;
      color: #413e66;
      border: 2px solid #e9ecef;
      padding: 12px 20px;
      margin: 5px;
      border-radius: 8px;
      font-weight: 600;
      transition: all 0.3s ease;
    }
    
    .enhanced-filter .filter-btn:hover,
    .enhanced-filter .filter-btn.is-checked {
      background: hsl(312, 100%, 50%);
      color: white;
      border-color: hsl(312, 100%, 50%);
    }
    
    /* GitHub project action buttons */
    .github-project-actions .btn {
      min-width: 40px;
      display: inline-flex;
      align-items: center;
      justify-content: center;
    }
    
    /* Form control buttons */
    .btn-group .btn {
      border-right: 1px solid rgba(255, 255, 255, 0.2);
      background: #fff;
      color: #413e66;
      border-color: #dee2e6;
    }
    
    .btn-group .btn:hover {
      background: hsl(312, 100%, 50%);
      color: white;
      border-color: hsl(312, 100%, 50%);
    }
    
    .btn-group .btn:last-child {
      border-right: none;
    }
    
    /* GitHub and social icons in btn-group */
    .btn-group .btn i.fab,
    .btn-group .btn i.lnr {
      color: inherit;
      font-size: 14px;
    }
    
    /* Specific button type overrides for btn-group */
    .btn-group .btn-outline-primary {
      background: #007bff;
      color: white;
      border-color: #007bff;
    }
    
    .btn-group .btn-outline-primary:hover {
      background: #0056b3;
      color: white;
      border-color: #0056b3;
    }
    
    .btn-group .btn-outline-success {
      background: #28a745;
      color: white;
      border-color: #28a745;
    }
    
    .btn-group .btn-outline-success:hover {
      background: #1e7e34;
      color: white;
      border-color: #1e7e34;
    }
    
    .btn-group .btn-outline-info {
      background: #17a2b8;
      color: white;
      border-color: #17a2b8;
    }
    
    .btn-group .btn-outline-info:hover {
      background: #117a8b;
      color: white;
      border-color: #117a8b;
    }
    
    /* Project items matching portfolio card style */
    .project-item {
      background: rgba(255, 255, 255, 0.9);
      border-radius: 15px;
      padding: 20px;
      margin-bottom: 15px;
      border: none;
      transition: all 0.3s ease;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
    }
    
    .project-item:hover {
      background: rgba(255, 255, 255, 0.95);
      transform: translateY(-3px);
      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
    }
    
    /* Badge styles matching portfolio badges */
    .project-badges .badge, .portfolio-badges .badge {
      margin: 2px;
      padding: 6px 12px;
      border-radius: 20px;
      font-size: 12px;
      font-weight: 600;
      text-transform: uppercase;
      border: none;
    }
    
    .badge-development { 
      background: #1bb1dc; 
      color: white; 
    }
    .badge-design { 
      background: hsl(312, 100%, 50%); 
      color: white; 
    }
    .badge-photography { 
      background: #17a2b8; 
      color: white; 
    }
    .badge-tool { 
      background: #28a745; 
      color: white; 
    }
    .badge-date { 
      background: #ffc107; 
      color: #212529; 
    }
    
    /* Stats section matching portfolio stats */
    .stats-row {
      background: rgba(255, 255, 255, 0.8);
      border-radius: 15px;
      padding: 20px;
      margin: 20px 0;
      backdrop-filter: blur(10px);
    }
    
    .stat-item {
      text-align: center;
    }
    
    .stat-number {
      font-size: 2rem;
      font-weight: bold;
      color: hsl(312, 100%, 50%);
      font-family: "Montserrat", sans-serif;
    }
    
    .stat-label {
      color: #666;
      font-size: 0.9rem;
      text-transform: uppercase;
      letter-spacing: 1px;
    }
    
    /* Form sections */
    .form-section {
      border-left: 4px solid hsl(312, 100%, 50%);
      padding-left: 20px;
      margin: 25px 0;
    }
    
    .section-title {
      color: #413e66;
      font-weight: 600;
      margin-bottom: 15px;
      display: flex;
      align-items: center;
      gap: 10px;
      font-family: "Montserrat", sans-serif;
    }
    
    .section-title i {
      color: hsl(312, 100%, 50%);
    }
    
    /* Image preview */
    .image-preview {
      max-width: 100px;
      max-height: 100px;
      border-radius: 8px;
      margin-top: 10px;
      border: 2px solid #e9ecef;
      object-fit: cover;
    }
    
    /* Timeline styles */
    .timeline-entry {
      background: rgba(255, 255, 255, 0.7);
      border-radius: 8px;
      padding: 15px;
      margin-bottom: 10px;
      border-left: 4px solid #1bb1dc;
    }
    
    .timeline-entry:hover {
      background: rgba(255, 255, 255, 0.9);
    }
    
    /* Alert styles matching portfolio theme */
    .alert {
      border-radius: 8px;
      border: none;
      padding: 15px 20px;
    }
    
    .alert-success {
      background-color: #d4edda;
      color: #155724;
      border-left: 4px solid #28a745;
    }
    
    .alert-danger {
      background-color: #f8d7da;
      color: #721c24;
      border-left: 4px solid #dc3545;
    }
    
    /* Header title styling */
    h1 {
      color: hsl(312, 100%, 50%);
      font-family: "Montserrat", sans-serif;
      font-weight: 600;
    }
    
    h3, h4, h5 {
      color: #413e66;
      font-family: "Montserrat", sans-serif;
      font-weight: 600;
    }
    
    /* Small text styling */
    small.text-muted {
      color: #666 !important;
    }
    
    .text-muted {
      color: #666 !important;
    }
    
    /* Responsive adjustments */
    @media (max-width: 768px) {
      .admin-container {
        padding: 10px 0;
      }
      
      .admin-header, .admin-card {
        margin: 0 10px 20px 10px;
        padding: 20px;
      }
      
      .project-item {
        padding: 15px;
      }
      
      .stats-row {
        padding: 15px;
      }
      
      .stat-number {
        font-size: 1.5rem;
      }
    }
    
    /* Account Modal Styles */
    .account-avatar {
      position: relative;
      display: inline-block;
    }
    
    .account-details .row {
      padding: 8px 0;
      border-bottom: 1px solid rgba(0, 0, 0, 0.05);
    }
    
    .account-details .row:last-child {
      border-bottom: none;
    }
    
    .security-item {
      background: rgba(255, 255, 255, 0.7);
      border-radius: 8px;
      padding: 15px;
      margin-bottom: 15px;
    }
    
    .activity-log {
      max-height: 300px;
      overflow-y: auto;
      background: rgba(255, 255, 255, 0.7);
      border-radius: 8px;
      padding: 15px;
    }
    
    .activity-item {
      margin-bottom: 10px;
    }
    
    .activity-item:last-child {
      border-bottom: none !important;
      margin-bottom: 0;
    }
    
    /* Modal customizations */
    .modal-content.admin-card {
      border: none;
      box-shadow: 0 15px 50px rgba(0, 0, 0, 0.3);
    }
    
    .btn-close-white {
      filter: invert(1) grayscale(100%) brightness(200%);
    }
    
    /* GitHub Projects Styling */
    .github-projects-container {
      max-height: 600px;
      overflow-y: auto;
    }
    
    .github-project-item {
      background: rgba(255, 255, 255, 0.9);
      border-radius: 15px;
      padding: 20px;
      margin-bottom: 15px;
      border: none;
      transition: all 0.3s ease;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
      position: relative;
    }
    
    .github-project-item:hover {
      background: rgba(255, 255, 255, 0.95);
      transform: translateY(-3px);
      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
    }
    
    .github-project-header {
      display: flex;
      justify-content: between;
      align-items: flex-start;
      margin-bottom: 15px;
    }
    
    .github-project-title {
      color: #413e66;
      font-family: "Montserrat", sans-serif;
      font-weight: 600;
      margin-bottom: 5px;
      display: flex;
      align-items: center;
      gap: 10px;
    }
    
    .github-project-title a {
      color: inherit;
      text-decoration: none;
    }
    
    .github-project-title a:hover {
      color: hsl(312, 100%, 50%);
    }
    
    .github-project-description {
      color: #666;
      margin-bottom: 15px;
      line-height: 1.5;
    }
    
    .github-project-stats {
      display: flex;
      gap: 20px;
      margin-bottom: 15px;
      font-size: 0.9rem;
    }
    
    .github-stat {
      display: flex;
      align-items: center;
      gap: 5px;
      color: #666;
    }
    
    .github-stat i {
      font-size: 0.8rem;
    }
    
    .github-language {
      display: inline-block;
      padding: 4px 8px;
      border-radius: 12px;
      font-size: 0.75rem;
      font-weight: 600;
      margin-right: 8px;
      margin-bottom: 5px;
    }
    
    .github-language.javascript { background: #f7df1e; color: #000; }
    .github-language.html { background: #e34c26; color: white; }
    .github-language.css { background: #1572b6; color: white; }
    .github-language.php { background: #4f5d95; color: white; }
    .github-language.python { background: #3776ab; color: white; }
    
    /* Activity Graph Styling */
    .activity-graph-container {
      margin: 15px 0;
      padding: 15px;
      border-radius: 8px;
      border: 1px solid rgba(255, 255, 255, 0.1);
    }
    
    .activity-graph-title {
      font-size: 12px;
      font-weight: 600;
      color: #999;
      margin-bottom: 10px;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }
    
    .activity-graph {
      display: flex;
      flex-wrap: wrap;
      gap: 2px;
      max-width: 100%;
      margin: 10px 0;
      justify-content: flex-start;
    }
    
    .activity-day {
      width: 12px;
      height: 12px;
      border-radius: 2px;
      background: rgba(255, 255, 255, 0.1);
      transition: all 0.2s ease;
      cursor: pointer;
      position: relative;
      flex-shrink: 0;
    }
    
    .activity-day:hover {
      transform: scale(1.3);
      z-index: 10;
      border: 1px solid rgba(255, 255, 255, 0.5);
    }
    
    /* Activity levels with better contrast against dark background */
    .activity-day.level-0 { 
      background: rgba(100, 100, 100, 0.2); 
      border: 1px solid rgba(150, 150, 150, 0.3);
    }
    .activity-day.level-1 { 
      background: rgba(27, 177, 220, 0.5); 
      border: 1px solid rgba(27, 177, 220, 0.7);
    }
    .activity-day.level-2 { 
      background: rgba(27, 177, 220, 0.7); 
      border: 1px solid rgba(27, 177, 220, 0.9);
    }
    .activity-day.level-3 { 
      background: #1bb1dc; 
      border: 1px solid #22c4e8;
    }
    .activity-day.level-4 { 
      background: #22c4e8; 
      border: 1px solid #0891b2;
      box-shadow: 0 0 12px rgba(34, 196, 232, 0.6);
    }
    
    .activity-legend {
      display: flex;
      align-items: center;
      justify-content: flex-end;
      gap: 5px;
      margin-top: 8px;
      margin-right: 10px;
      font-size: 11px;
      color: #999;
      padding-right: 5px;
    }
    
    .activity-legend-item {
      display: flex;
      align-items: center;
      gap: 3px;
    }
    
    .activity-legend-dot {
      width: 10px;
      height: 10px;
      border-radius: 2px;
      border: 1px solid rgba(255, 255, 255, 0.2);
    }
    
    /* Legend dot colors matching new activity levels */
    .activity-legend-dot.level-0 { 
      background: rgba(100, 100, 100, 0.2); 
      border-color: rgba(150, 150, 150, 0.3);
    }
    .activity-legend-dot.level-1 { 
      background: rgba(27, 177, 220, 0.5); 
      border-color: rgba(27, 177, 220, 0.7);
    }
    .activity-legend-dot.level-2 { 
      background: rgba(27, 177, 220, 0.7); 
      border-color: rgba(27, 177, 220, 0.9);
    }
    .activity-legend-dot.level-3 { 
      background: #1bb1dc; 
      border-color: #22c4e8;
    }
    .activity-legend-dot.level-4 { 
      background: #22c4e8; 
      border-color: #0891b2;
    }
    
    .activity-stats {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-top: 10px;
      padding-top: 10px;
      border-top: 1px solid rgba(255, 255, 255, 0.1);
    }
    
    .activity-stat {
      font-size: 11px;
      color: #999;
    }
    
    .activity-stat strong {
      color: #1bb1dc;
      font-weight: 600;
    }
    
    /* Responsive activity graph */
    @media (max-width: 768px) {
      .activity-day {
        width: 8px;
        height: 8px;
      }
      
      .activity-graph {
        gap: 1px;
      }
    }
    .github-language.java { background: #f89820; color: white; }
    .github-language.default { background: #6c757d; color: white; }
    
    .github-project-actions {
      display: flex;
      justify-content: between;
      align-items: center;
      gap: 10px;
      margin-top: 15px;
    }
    
    .github-project-meta {
      font-size: 0.8rem;
      color: #999;
    }
    
    .repo-visibility {
      position: absolute;
      top: 15px;
      right: 15px;
      padding: 4px 8px;
      border-radius: 12px;
      font-size: 0.7rem;
      font-weight: 600;
    }
    
    .repo-visibility.public {
      background: #28a745;
      color: white;
    }
    
    .repo-visibility.private {
      background: #ffc107;
      color: #212529;
    }
    
    .fork-indicator {
      color: #666;
      font-size: 0.8rem;
      font-style: italic;
    }
    
    /* Loading states */
    .github-loading-item {
      background: rgba(255, 255, 255, 0.7);
      border-radius: 15px;
      padding: 20px;
      margin-bottom: 15px;
      animation: pulse 1.5s ease-in-out infinite;
    }
    
    @keyframes pulse {
      0%, 100% { opacity: 0.7; }
      50% { opacity: 1; }
    }
    
    .github-loading-title {
      height: 20px;
      background: #e9ecef;
      border-radius: 4px;
      margin-bottom: 10px;
      width: 60%;
    }
    
    .github-loading-desc {
      height: 14px;
      background: #f8f9fa;
      border-radius: 4px;
      margin-bottom: 8px;
    }
    
    .github-loading-stats {
      height: 12px;
      background: #f8f9fa;
      border-radius: 4px;
      width: 40%;
    }
  </style>
</head>

<body>
  <div class="container-fluid admin-container">
    
    <!-- Admin Header -->
    <div class="admin-header">
      <div class="row align-items-center">
        <div class="col-md-8">
          <h1 class="mb-2">
            <i class="lnr lnr-cog"></i>
            Portfolio Admin Dashboard
          </h1>
          <p class="text-muted mb-0">Beheer je projecten, update content en bekijk statistieken</p>
        </div>
        <div class="col-md-4 text-md-end">
          <button class="btn btn-outline-info me-2" id="accountBtn" title="Account Details">
            <i class="lnr lnr-user"></i>
            Account
          </button>
          <button class="btn btn-outline-danger me-2" id="logoutBtn" title="Uitloggen">
            <i class="lnr lnr-exit"></i>
            Uitloggen
          </button>
          <a href="index.html" class="btn btn-outline-primary">
            <i class="lnr lnr-home"></i>
            Terug naar Portfolio
          </a>
        </div>
      </div>
      
      <!-- Quick Stats -->
      <div class="stats-row mt-4">
        <div class="row text-center">
          <div class="col-md-3">
            <div class="stat-item">
              <div class="stat-number" id="totalProjects">0</div>
              <div class="text-muted">Totaal Projecten</div>
            </div>
          </div>
          <div class="col-md-3">
            <div class="stat-item">
              <div class="stat-number" id="developmentProjects">0</div>
              <div class="text-muted">Development</div>
            </div>
          </div>
          <div class="col-md-3">
            <div class="stat-item">
              <div class="stat-number" id="designProjects">0</div>
              <div class="text-muted">Design</div>
            </div>
          </div>
          <div class="col-md-3">
            <div class="stat-item">
              <div class="stat-number" id="photographyProjects">0</div>
              <div class="text-muted">Photography</div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="row">
      <!-- Project Form -->
      <div class="col-lg-6">
        <div class="admin-card">
          <div class="card-header">
            <h3 class="mb-0">
              <i class="lnr lnr-plus-circle"></i>
              <span id="formTitle">Nieuw Project Toevoegen</span>
            </h3>
          </div>
          <div class="card-body p-4">
            
            <!-- Success/Error Messages -->
            <div id="alertContainer"></div>
            
            <form id="projectForm">
              <input type="hidden" id="projectIndex" value="">
              
              <!-- Basic Information Section -->
              <div class="form-section">
                <h5 class="section-title">
                  <i class="lnr lnr-bookmark"></i>
                  Basis Informatie
                </h5>
                
                <div class="row">
                  <div class="col-md-8 mb-3">
                    <label for="projectTitle" class="form-label">Project Titel *</label>
                    <input type="text" class="form-control" id="projectTitle" required>
                  </div>
                  <div class="col-md-4 mb-3">
                    <label for="projectYear" class="form-label">Jaar *</label>
                    <input type="number" class="form-control" id="projectYear" min="2020" max="2030" required>
                  </div>
                </div>
                
                <div class="mb-3">
                  <label for="projectDescription" class="form-label">Beschrijving *</label>
                  <textarea class="form-control" id="projectDescription" rows="3" required></textarea>
                </div>
                
                <div class="row">
                  <div class="col-md-6 mb-3">
                    <label for="projectCategory" class="form-label">Categorie *</label>
                    <select class="form-select" id="projectCategory" required>
                      <option value="">Selecteer categorie</option>
                      <option value="development">Development</option>
                      <option value="design">Design</option>
                      <option value="photography">Photography</option>
                    </select>
                  </div>
                  <div class="col-md-6 mb-3">
                    <label for="projectStatus" class="form-label">Status</label>
                    <select class="form-select" id="projectStatus">
                      <option value="completed">Voltooid</option>
                      <option value="in-progress">In Uitvoering</option>
                      <option value="planned">Gepland</option>
                    </select>
                  </div>
                </div>
              </div>

              <!-- Media Section -->
              <div class="form-section">
                <h5 class="section-title">
                  <i class="lnr lnr-picture"></i>
                  Media & Visueel
                </h5>
                
                <div class="mb-3">
                  <label for="projectImage" class="form-label">Project Afbeelding</label>
                  <input type="file" class="form-control" id="projectImage" accept="image/*">
                  <small class="text-muted">Upload een afbeelding of gebruik een bestaande uit de img/ folder</small>
                  <div id="imagePreview"></div>
                </div>
                
                <div class="mb-3">
                  <label for="projectImagePath" class="form-label">Of gebruik bestaande afbeelding</label>
                  <input type="text" class="form-control" id="projectImagePath" placeholder="img/example.png">
                </div>
              </div>

              <!-- Technical Details Section -->
              <div class="form-section">
                <h5 class="section-title">
                  <i class="lnr lnr-cog"></i>
                  Technische Details
                </h5>
                
                <div class="row">
                  <div class="col-md-6 mb-3">
                    <label for="projectTools" class="form-label">Tools/Technologieën</label>
                    <input type="text" class="form-control" id="projectTools" placeholder="HTML, CSS, JavaScript">
                    <small class="text-muted">Scheidt met komma's</small>
                  </div>
                  <div class="col-md-6 mb-3">
                    <label for="projectUrl" class="form-label">Project URL</label>
                    <input type="url" class="form-control" id="projectUrl" placeholder="https://example.com">
                  </div>
                </div>
                
                <div class="mb-3">
                  <label for="projectFeatures" class="form-label">Belangrijkste Features</label>
                  <textarea class="form-control" id="projectFeatures" rows="3" placeholder="Elke regel wordt een feature"></textarea>
                  <small class="text-muted">Elke regel wordt een aparte feature</small>
                </div>
              </div>

              <!-- Timeline Section -->
              <div class="form-section">
                <h5 class="section-title">
                  <i class="lnr lnr-clock"></i>
                  Ontwikkelingsproces (Optioneel)
                </h5>
                
                <div id="timelineContainer">
                  <div class="timeline-entry mb-3">
                    <div class="row">
                      <div class="col-md-4">
                        <label class="form-label">Week/Fase</label>
                        <input type="text" class="form-control timeline-week" placeholder="Week 1">
                      </div>
                      <div class="col-md-8">
                        <label class="form-label">Beschrijving</label>
                        <input type="text" class="form-control timeline-desc" placeholder="Wat werd er gedaan?">
                      </div>
                    </div>
                  </div>
                </div>
                
                <button type="button" class="btn btn-outline-primary btn-sm" id="addTimelineEntry">
                  <i class="lnr lnr-plus-circle"></i>
                  Timeline Item Toevoegen
                </button>
              </div>

              <!-- Form Actions -->
              <div class="text-end mt-4">
                <button type="button" class="btn btn-secondary me-2" id="resetForm">
                  <i class="lnr lnr-undo"></i>
                  Reset
                </button>
                <button type="submit" class="btn btn-primary">
                  <i class="lnr lnr-checkmark-circle"></i>
                  <span id="submitText">Project Opslaan</span>
                </button>
              </div>
            </form>
          </div>
        </div>
      </div>

      <!-- Projects List -->
      <div class="col-lg-6">
        <div class="admin-card">
          <div class="card-header d-flex justify-content-between align-items-center">
            <h3 class="mb-0">
              <i class="lnr lnr-list"></i>
              Huidige Projecten
            </h3>
            <div>
              <button class="btn btn-outline-light btn-sm" id="exportProjects">
                <i class="lnr lnr-download"></i>
                Export
              </button>
              <button class="btn btn-outline-light btn-sm" id="importProjects">
                <i class="lnr lnr-upload"></i>
                Import
              </button>
            </div>
          </div>
          <div class="card-body p-4">
            
            <!-- Filter Options -->
            <div class="mb-3">
              <div class="row">
                <div class="col-md-6">
                  <select class="form-select" id="filterCategory">
                    <option value="">Alle Categorieën</option>
                    <option value="development">Development</option>
                    <option value="design">Design</option>
                    <option value="photography">Photography</option>
                  </select>
                </div>
                <div class="col-md-6">
                  <input type="text" class="form-control" id="searchProjects" placeholder="Zoeken...">
                </div>
              </div>
            </div>
            
            <!-- Projects Container -->
            <div id="projectsList" class="projects-container">
              <div class="text-center text-muted py-5">
                <i class="lnr lnr-inbox" style="font-size: 3rem; opacity: 0.3;"></i>
                <p class="mt-3">Nog geen projecten toegevoegd</p>
                <small>Gebruik het formulier om je eerste project toe te voegen</small>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- GitHub Projects Section -->
    <div class="row mt-4">
      <div class="col-12">
        <div class="admin-card">
          <div class="card-header d-flex justify-content-between align-items-center">
            <h3 class="mb-0">
              <i class="fab fa-github"></i>
              GitHub Projecten
            </h3>
            <div>
              <button class="btn btn-outline-light btn-sm" id="refreshGitHub">
                <i class="lnr lnr-sync"></i>
                Vernieuwen
              </button>
              <button class="btn btn-outline-light btn-sm" id="syncGitHub">
                <i class="lnr lnr-download"></i>
                Sync naar Portfolio
              </button>
            </div>
          </div>
          <div class="card-body p-4">
            
            <!-- GitHub Settings -->
            <div class="row mb-4">
              <div class="col-md-6">
                <label for="githubUsername" class="form-label">
                  <i class="fab fa-github"></i>
                  GitHub Gebruikersnaam
                </label>
                <input type="text" class="form-control" id="githubUsername" value="tiebocroons" placeholder="Je GitHub gebruikersnaam">
              </div>
              <div class="col-md-6">
                <label for="githubToken" class="form-label">
                  <i class="lnr lnr-lock"></i>
                  Personal Access Token (Aanbevolen)
                </label>
                <input type="password" class="form-control" id="githubToken" placeholder="Nodig voor meer dan 60 API calls per uur">
                <small class="text-muted">
                  Verhoogt API limiet naar 5000/uur. 
                  <a href="https://github.com/settings/tokens" target="_blank" class="text-info">Maak token aan →</a>
                </small>
              </div>
            </div>
            
            <!-- GitHub Stats -->
            <div class="stats-row mb-4">
              <div class="row text-center">
                <div class="col-md-3">
                  <div class="stat-item">
                    <div class="stat-number" id="githubRepoCount">-</div>
                    <div class="stat-label">Repositories</div>
                  </div>
                </div>
                <div class="col-md-3">
                  <div class="stat-item">
                    <div class="stat-number" id="githubStarsCount">-</div>
                    <div class="stat-label">Totaal Stars</div>
                  </div>
                </div>
                <div class="col-md-3">
                  <div class="stat-item">
                    <div class="stat-number" id="githubForksCount">-</div>
                    <div class="stat-label">Totaal Forks</div>
                  </div>
                </div>
                <div class="col-md-3">
                  <div class="stat-item">
                    <div class="stat-number" id="githubLanguages">-</div>
                    <div class="stat-label">Talen</div>
                  </div>
                </div>
              </div>
            </div>
            
            <!-- Filter Options -->
            <div class="row mb-3">
              <div class="col-md-4">
                <select class="form-select" id="githubFilter">
                  <option value="all">Alle Repositories</option>
                  <option value="public">Alleen Public</option>
                  <option value="private">Alleen Private</option>
                  <option value="forks">Alleen Forks</option>
                  <option value="sources">Geen Forks</option>
                </select>
              </div>
              <div class="col-md-4">
                <select class="form-select" id="githubSort">
                  <option value="updated">Laatst Bijgewerkt</option>
                  <option value="created">Aanmaakdatum</option>
                  <option value="name">Naam</option>
                  <option value="stars">Sterren</option>
                  <option value="forks">Forks</option>
                </select>
              </div>
              <div class="col-md-4">
                <input type="text" class="form-control" id="githubSearch" placeholder="Zoek repositories...">
              </div>
            </div>
            
            <!-- Loading State -->
            <div id="githubLoading" class="text-center py-5" style="display: none;">
              <div class="spinner-border text-primary" role="status">
                <span class="visually-hidden">Laden...</span>
              </div>
              <p class="mt-3 text-muted">GitHub repositories laden...</p>
            </div>
            
            <!-- GitHub Projects Container -->
            <div id="githubProjectsList" class="github-projects-container">
              <div class="text-center text-muted py-5">
                <i class="fab fa-github" style="font-size: 3rem; opacity: 0.3;"></i>
                <p class="mt-3">Klik op "Vernieuwen" om je GitHub repositories te laden</p>
                <small>Zorg ervoor dat je GitHub gebruikersnaam correct is ingevuld</small>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Account Details Modal -->
  <div class="modal fade" id="accountModal" tabindex="-1" aria-labelledby="accountModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
      <div class="modal-content admin-card" style="margin-bottom: 0;">
        <div class="modal-header card-header">
          <h3 class="modal-title" id="accountModalLabel">
            <i class="lnr lnr-user"></i>
            Account Details
          </h3>
          <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body p-4">
          
          <!-- Account Info -->
          <div class="row mb-4">
            <div class="col-md-4 text-center">
              <div class="account-avatar mb-3">
                <img src="img/testi-1.png" alt="Profile" class="rounded-circle" width="120" height="120" style="object-fit: cover; border: 4px solid hsl(312, 100%, 50%);">
              </div>
              <h5 id="accountName">Tiebo Croons</h5>
              <p class="text-muted" id="accountRole">Portfolio Administrator</p>
            </div>
            <div class="col-md-8">
              
              <!-- Account Details -->
              <div class="account-details">
                <h6 class="section-title">
                  <i class="lnr lnr-bookmark"></i>
                  Account Informatie
                </h6>
                
                <div class="row mb-3">
                  <div class="col-sm-4"><strong>Gebruikersnaam:</strong></div>
                  <div class="col-sm-8" id="accountUsername">admin</div>
                </div>
                
                <div class="row mb-3">
                  <div class="col-sm-4"><strong>Email:</strong></div>
                  <div class="col-sm-8" id="accountEmail">tiebo.croons@example.com</div>
                </div>
                
                <div class="row mb-3">
                  <div class="col-sm-4"><strong>Laatste Login:</strong></div>
                  <div class="col-sm-8" id="lastLogin">-</div>
                </div>
                
                <div class="row mb-3">
                  <div class="col-sm-4"><strong>Account Aangemaakt:</strong></div>
                  <div class="col-sm-8" id="accountCreated">September 2024</div>
                </div>
                
                <div class="row mb-3">
                  <div class="col-sm-4"><strong>Sessie Status:</strong></div>
                  <div class="col-sm-8">
                    <span class="badge badge-development" id="sessionStatus">Actief</span>
                  </div>
                </div>
              </div>
            </div>
          </div>
          
          <!-- Session Information -->
          <div class="form-section">
            <h6 class="section-title">
              <i class="lnr lnr-clock"></i>
              Sessie Informatie
            </h6>
            
            <div class="stats-row">
              <div class="row text-center">
                <div class="col-md-3">
                  <div class="stat-item">
                    <div class="stat-number" id="sessionDuration">0h 0m</div>
                    <div class="stat-label">Huidige Sessie</div>
                  </div>
                </div>
                <div class="col-md-3">
                  <div class="stat-item">
                    <div class="stat-number" id="totalLogins">-</div>
                    <div class="stat-label">Totaal Logins</div>
                  </div>
                </div>
                <div class="col-md-3">
                  <div class="stat-item">
                    <div class="stat-number" id="failedAttempts">0</div>
                    <div class="stat-label">Mislukte Pogingen</div>
                  </div>
                </div>
                <div class="col-md-3">
                  <div class="stat-item">
                    <div class="stat-number" id="sessionExpiry">24h</div>
                    <div class="stat-label">Sessie Verloopt</div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          
          <!-- Security Settings -->
          <div class="form-section">
            <h6 class="section-title">
              <i class="lnr lnr-shield"></i>
              Beveiligingsinstellingen
            </h6>
            
            <div class="row">
              <div class="col-md-6">
                <div class="security-item">
                  <div class="d-flex justify-content-between align-items-center mb-2">
                    <span><i class="lnr lnr-lock text-success"></i> Automatisch uitloggen</span>
                    <span class="text-success">Ingeschakeld</span>
                  </div>
                  <small class="text-muted">Na 24 uur inactiviteit</small>
                </div>
              </div>
              <div class="col-md-6">
                <div class="security-item">
                  <div class="d-flex justify-content-between align-items-center mb-2">
                    <span><i class="lnr lnr-shield text-success"></i> Brute force bescherming</span>
                    <span class="text-success">Ingeschakeld</span>
                  </div>
                  <small class="text-muted">Max 3 pogingen, 15 min lockout</small>
                </div>
              </div>
            </div>
          </div>
          
          <!-- Activity Log -->
          <div class="form-section">
            <h6 class="section-title">
              <i class="lnr lnr-list"></i>
              Recente Activiteit
            </h6>
            
            <div id="activityLog" class="activity-log">
              <!-- Will be populated by JavaScript -->
            </div>
          </div>
          
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-primary" id="changePasswordBtn">
            <i class="lnr lnr-lock"></i>
            Wachtwoord Wijzigen
          </button>
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
            Sluiten
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Change Password Modal -->
  <div class="modal fade" id="changePasswordModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content admin-card" style="margin-bottom: 0;">
        <div class="modal-header card-header">
          <h5 class="modal-title">
            <i class="lnr lnr-lock"></i>
            Wachtwoord Wijzigen
          </h5>
          <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
        </div>
        <div class="modal-body p-4">
          
          <div id="passwordAlertContainer"></div>
          
          <form id="changePasswordForm">
            <div class="form-group mb-3">
              <label class="form-label">
                <i class="lnr lnr-lock"></i>
                Huidig Wachtwoord
              </label>
              <input type="password" class="form-control" id="currentPassword" required>
            </div>
            
            <div class="form-group mb-3">
              <label class="form-label">
                <i class="lnr lnr-lock"></i>
                Nieuw Wachtwoord
              </label>
              <input type="password" class="form-control" id="newPassword" required>
              <small class="text-muted">Minimaal 6 karakters</small>
            </div>
            
            <div class="form-group mb-3">
              <label class="form-label">
                <i class="lnr lnr-lock"></i>
                Bevestig Nieuw Wachtwoord
              </label>
              <input type="password" class="form-control" id="confirmPassword" required>
            </div>
          </form>
          
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-primary" id="savePasswordBtn">
            <i class="lnr lnr-checkmark-circle"></i>
            Wachtwoord Opslaan
          </button>
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
            Annuleren
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Hidden file input for import -->
  <input type="file" id="importFileInput" accept=".json" style="display: none;">

  <!-- JavaScript Libraries -->
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="vendor/bootstrap/bootstrap.min.js"></script>
  
  <!-- Admin JavaScript -->
  <script>
    // Authentication check
    function checkAuthentication() {
      const isAuthenticated = sessionStorage.getItem('isAuthenticated');
      const loginTime = sessionStorage.getItem('loginTime');
      
      // Check if user is authenticated and session hasn't expired (24 hours)
      if (!isAuthenticated || !loginTime || (Date.now() - parseInt(loginTime)) > 24 * 60 * 60 * 1000) {
        // Clear session and redirect to login
        sessionStorage.removeItem('isAuthenticated');
        sessionStorage.removeItem('loginTime');
        window.location.href = 'login.html';
        return false;
      }
      return true;
    }
    
    // Check authentication before loading the admin panel
    if (!checkAuthentication()) {
      // Will redirect to login, don't load anything else
    } else {
      // Load admin functionality
      class ProjectManager {
      constructor() {
        this.projects = [];
        this.editingIndex = -1;
        this.init();
      }

      init() {
        this.loadProjects();
        this.bindEvents();
        this.updateStats();
        this.renderProjects();
      }

      bindEvents() {
        // Form submission
        $('#projectForm').on('submit', (e) => {
          e.preventDefault();
          this.saveProject();
        });

        // Reset form
        $('#resetForm').on('click', () => {
          this.resetForm();
        });

        // Add timeline entry
        $('#addTimelineEntry').on('click', () => {
          this.addTimelineEntry();
        });

        // Image preview
        $('#projectImage').on('change', (e) => {
          this.handleImageUpload(e.target.files[0]);
        });

        // Search and filter
        $('#searchProjects').on('input', () => {
          this.renderProjects();
        });

        $('#filterCategory').on('change', () => {
          this.renderProjects();
        });

        // Export/Import
        $('#exportProjects').on('click', () => {
          this.exportProjects();
        });

        $('#importProjects').on('click', () => {
          $('#importFileInput').click();
        });

        $('#importFileInput').on('change', (e) => {
          this.importProjects(e.target.files[0]);
        });

        // Generation tools
        $('#generatePortfolioCode').on('click', () => {
          this.generatePortfolioCode();
        });

        $('#generateDetailPages').on('click', () => {
          this.generateDetailPages();
        });

        $('#updateNavigation').on('click', () => {
          this.updateNavigation();
        });

        // Set current year as default
        $('#projectYear').val(new Date().getFullYear());
        
        // Logout functionality
        $('#logoutBtn').on('click', () => {
          if (confirm('Weet je zeker dat je wilt uitloggen?')) {
            this.logout();
          }
        });
        
        // Account details functionality
        $('#accountBtn').on('click', () => {
          this.showAccountDetails();
        });
        
        // Change password functionality
        $('#changePasswordBtn').on('click', () => {
          $('#accountModal').modal('hide');
          $('#changePasswordModal').modal('show');
        });
        
        $('#savePasswordBtn').on('click', () => {
          this.changePassword();
        });
        
        // GitHub functionality
        $('#refreshGitHub').on('click', () => {
          this.loadGitHubProjects();
        });
        
        $('#syncGitHub').on('click', () => {
          this.syncGitHubProjects();
        });
        
        $('#githubFilter, #githubSort').on('change', () => {
          this.filterGitHubProjects();
        });
        
        $('#githubSearch').on('input', () => {
          this.filterGitHubProjects();
        });
        
        // Load GitHub username from storage
        const savedUsername = localStorage.getItem('githubUsername');
        if (savedUsername) {
          $('#githubUsername').val(savedUsername);
        }
        
        // Save GitHub settings on change
        $('#githubUsername, #githubToken').on('change', () => {
          localStorage.setItem('githubUsername', $('#githubUsername').val());
          if ($('#githubToken').val()) {
            localStorage.setItem('githubToken', $('#githubToken').val());
          }
        });
      }
      
      logout() {
        // Clear session
        sessionStorage.removeItem('isAuthenticated');
        sessionStorage.removeItem('loginTime');
        
        // Show logout message
        this.showAlert('Je bent succesvol uitgelogd!', 'success');
        
        // Redirect to login after short delay
        setTimeout(() => {
          window.location.href = 'login.html';
        }, 1500);
      }
      
      showAccountDetails() {
        // Update session duration
        const loginTime = sessionStorage.getItem('loginTime');
        if (loginTime) {
          const duration = Date.now() - parseInt(loginTime);
          const hours = Math.floor(duration / (1000 * 60 * 60));
          const minutes = Math.floor((duration % (1000 * 60 * 60)) / (1000 * 60));
          $('#sessionDuration').text(`${hours}h ${minutes}m`);
        }
        
        // Update last login
        const lastLoginTime = localStorage.getItem('lastLoginTime');
        if (lastLoginTime) {
          const date = new Date(parseInt(lastLoginTime));
          $('#lastLogin').text(date.toLocaleString('nl-NL'));
        }
        
        // Update failed attempts
        const failedAttempts = localStorage.getItem('loginAttempts') || '0';
        $('#failedAttempts').text(failedAttempts);
        
        // Update total logins
        const totalLogins = localStorage.getItem('totalLogins') || '1';
        $('#totalLogins').text(totalLogins);
        
        // Calculate session expiry
        if (loginTime) {
          const expiryTime = parseInt(loginTime) + (24 * 60 * 60 * 1000);
          const timeLeft = expiryTime - Date.now();
          const hoursLeft = Math.floor(timeLeft / (1000 * 60 * 60));
          const minutesLeft = Math.floor((timeLeft % (1000 * 60 * 60)) / (1000 * 60));
          $('#sessionExpiry').text(`${hoursLeft}h ${minutesLeft}m`);
        }
        
        // Load activity log
        this.loadActivityLog();
        
        // Show modal
        $('#accountModal').modal('show');
      }
      
      loadActivityLog() {
        const activities = [
          {
            action: 'Ingelogd',
            timestamp: sessionStorage.getItem('loginTime'),
            ip: 'Lokaal',
            status: 'success'
          },
          {
            action: 'Admin dashboard geopend',
            timestamp: Date.now() - 60000,
            ip: 'Lokaal',
            status: 'info'
          },
          {
            action: 'Project beheer bekeken',
            timestamp: Date.now() - 120000,
            ip: 'Lokaal',
            status: 'info'
          }
        ];
        
        const activityHtml = activities.map(activity => {
          const date = new Date(parseInt(activity.timestamp));
          const statusClass = activity.status === 'success' ? 'text-success' : 
                             activity.status === 'warning' ? 'text-warning' : 'text-info';
          const statusIcon = activity.status === 'success' ? 'lnr-checkmark-circle' : 
                            activity.status === 'warning' ? 'lnr-warning' : 'lnr-clock';
          
          return `
            <div class="activity-item d-flex justify-content-between align-items-center py-2 border-bottom">
              <div>
                <i class="lnr ${statusIcon} ${statusClass} me-2"></i>
                <strong>${activity.action}</strong>
                <br>
                <small class="text-muted">IP: ${activity.ip}</small>
              </div>
              <div class="text-end">
                <small class="text-muted">${date.toLocaleString('nl-NL')}</small>
              </div>
            </div>
          `;
        }).join('');
        
        $('#activityLog').html(activityHtml || '<p class="text-muted">Geen recente activiteit</p>');
      }
      
      changePassword() {
        const currentPassword = $('#currentPassword').val();
        const newPassword = $('#newPassword').val();
        const confirmPassword = $('#confirmPassword').val();
        
        // Clear previous alerts
        $('#passwordAlertContainer').empty();
        
        // Validate form
        if (!currentPassword || !newPassword || !confirmPassword) {
          this.showPasswordAlert('Vul alle velden in', 'danger');
          return;
        }
        
        if (newPassword.length < 6) {
          this.showPasswordAlert('Nieuw wachtwoord moet minimaal 6 karakters bevatten', 'danger');
          return;
        }
        
        if (newPassword !== confirmPassword) {
          this.showPasswordAlert('Nieuwe wachtwoorden komen niet overeen', 'danger');
          return;
        }
        
        // Verify current password (in production, this should be server-side)
        if (currentPassword !== 'portfolio2024') {
          this.showPasswordAlert('Huidig wachtwoord is onjuist', 'danger');
          return;
        }
        
        // Simulate password change (in production, this should be server-side)
        setTimeout(() => {
          this.showPasswordAlert('Wachtwoord succesvol gewijzigd!', 'success');
          
          // Clear form
          $('#changePasswordForm')[0].reset();
          
          // Close modal after delay
          setTimeout(() => {
            $('#changePasswordModal').modal('hide');
          }, 2000);
        }, 1000);
      }
      
      showPasswordAlert(message, type) {
        const alertClass = type === 'success' ? 'alert-success' : 'alert-danger';
        const html = `
          <div class="alert ${alertClass} alert-dismissible fade show" role="alert">
            ${message}
            <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
          </div>
        `;
        $('#passwordAlertContainer').html(html);
      }
      
      // GitHub Integration Methods
      async loadGitHubProjects() {
        const username = $('#githubUsername').val().trim();
        if (!username) {
          this.showAlert('Voer eerst je GitHub gebruikersnaam in', 'danger');
          return;
        }
        
        this.showGitHubLoading(true);
        
        try {
          const token = $('#githubToken').val() || localStorage.getItem('githubToken');
          const headers = {
            'Accept': 'application/vnd.github.v3+json',
            'User-Agent': 'Portfolio-Admin'
          };
          
          if (token) {
            headers['Authorization'] = `token ${token}`;
          }
          
          // Fetch user info
          const userResponse = await fetch(`https://api.github.com/users/${username}`, { headers });
          if (!userResponse.ok) {
            if (userResponse.status === 403) {
              throw new Error(`GitHub API rate limit bereikt (403). Je hebt een GitHub token nodig voor meer API calls. Maak een token aan op: https://github.com/settings/tokens`);
            } else if (userResponse.status === 404) {
              throw new Error(`Gebruiker '${username}' niet gevonden. Controleer je gebruikersnaam.`);
            } else {
              throw new Error(`Fout bij ophalen gebruiker: ${userResponse.status}`);
            }
          }
          
          // Fetch repositories
          const reposResponse = await fetch(`https://api.github.com/users/${username}/repos?per_page=100&sort=updated`, { headers });
          if (!reposResponse.ok) {
            if (reposResponse.status === 403) {
              throw new Error(`GitHub API rate limit bereikt (403). Je hebt een GitHub token nodig voor meer API calls. Maak een token aan op: https://github.com/settings/tokens`);
            } else {
              throw new Error(`Fout bij ophalen repositories: ${reposResponse.status}`);
            }
          }
          
          const repos = await reposResponse.json();
          this.githubRepos = repos;
          
          // Update stats
          this.updateGitHubStats(repos);
          
          // Render projects
          this.renderGitHubProjects(repos);
          
        } catch (error) {
          console.error('GitHub API Error:', error);
          this.showAlert(`Fout bij laden GitHub projecten: ${error.message}`, 'danger');
          this.showGitHubError();
        } finally {
          this.showGitHubLoading(false);
        }
      }
      
      updateGitHubStats(repos) {
        const totalStars = repos.reduce((sum, repo) => sum + repo.stargazers_count, 0);
        const totalForks = repos.reduce((sum, repo) => sum + repo.forks_count, 0);
        const languages = [...new Set(repos.map(repo => repo.language).filter(lang => lang))];
        
        $('#githubRepoCount').text(repos.length);
        $('#githubStarsCount').text(totalStars);
        $('#githubForksCount').text(totalForks);
        $('#githubLanguages').text(languages.length);
      }
      
      renderGitHubProjects(repos) {
        if (repos.length === 0) {
          $('#githubProjectsList').html(`
            <div class="text-center text-muted py-5">
              <i class="fab fa-github" style="font-size: 3rem; opacity: 0.3;"></i>
              <p class="mt-3">Geen repositories gevonden</p>
              <small>Controleer je gebruikersnaam of repository privacy instellingen</small>
            </div>
          `);
          return;
        }
        
        const html = repos.map(repo => {
          const updatedDate = new Date(repo.updated_at).toLocaleDateString('nl-NL');
          const createdDate = new Date(repo.created_at).toLocaleDateString('nl-NL');
          const language = repo.language || 'Unknown';
          const languageClass = language.toLowerCase().replace(/[^a-z0-9]/g, '');
          
          return `
            <div class="github-project-item" data-name="${repo.name.toLowerCase()}" data-language="${language.toLowerCase()}" data-visibility="${repo.private ? 'private' : 'public'}" data-fork="${repo.fork}">
              <div class="repo-visibility ${repo.private ? 'private' : 'public'}">
                ${repo.private ? 'Private' : 'Public'}
              </div>
              
              <div class="github-project-header">
                <div class="flex-grow-1">
                  <h5 class="github-project-title">
                    <a href="${repo.html_url}" target="_blank" title="Open op GitHub">
                      ${repo.name}
                    </a>
                    ${repo.fork ? '<i class="lnr lnr-link fork-indicator" title="Fork"></i>' : ''}
                  </h5>
                  ${repo.fork ? '<p class="fork-indicator">Fork van ' + (repo.parent ? repo.parent.full_name : 'onbekende repository') + '</p>' : ''}
                </div>
              </div>
              
              ${repo.description ? `<p class="github-project-description">${repo.description}</p>` : '<p class="text-muted">Geen beschrijving beschikbaar</p>'}
              
              <div class="github-project-stats">
                <div class="github-stat">
                  <i class="lnr lnr-star"></i>
                  <span>${repo.stargazers_count}</span>
                </div>
                <div class="github-stat">
                  <i class="lnr lnr-branch"></i>
                  <span>${repo.forks_count}</span>
                </div>
                <div class="github-stat">
                  <i class="lnr lnr-eye"></i>
                  <span>${repo.watchers_count}</span>
                </div>
                <div class="github-stat">
                  <i class="lnr lnr-download"></i>
                  <span>${this.formatFileSize(repo.size * 1024)}</span>
                </div>
              </div>
              
              <div class="github-languages mb-3">
                ${repo.language ? `<span class="github-language ${languageClass}">${repo.language}</span>` : ''}
              </div>
              
              <!-- Activity Graph -->
              <div class="activity-graph-container" id="activity-${repo.name}">
                <div class="activity-graph-title">
                  <i class="lnr lnr-chart-bars"></i>
                  Activiteit (laatste 52 weken)
                </div>
                <div class="activity-graph" id="graph-${repo.name}">
                  <div class="text-center text-muted">
                    <small>Laden van activiteitsgegevens...</small>
                  </div>
                </div>
              </div>
              
              <div class="github-project-actions">
                <div class="github-project-meta">
                  <small class="text-muted">
                    <i class="lnr lnr-calendar-full"></i>
                    Bijgewerkt: ${updatedDate}
                  </small>
                </div>
                <div class="btn-group">
                  <a href="${repo.html_url}" target="_blank" class="btn btn-outline-primary btn-sm" title="Bekijk op GitHub">
                    <i class="fab fa-github"></i>
                  </a>
                  ${repo.homepage ? `<a href="${repo.homepage}" target="_blank" class="btn btn-outline-success btn-sm" title="Live Demo"><i class="lnr lnr-link"></i></a>` : ''}
                  <button class="btn btn-outline-info btn-sm import-github-project" data-repo='${JSON.stringify(repo)}' title="Importeer naar Portfolio">
                    <i class="lnr lnr-download"></i>
                  </button>
                </div>
              </div>
            </div>
          `;
        }).join('');
        
        $('#githubProjectsList').html(html);
        
        // Load activity graphs for each repository
        setTimeout(() => {
          repos.forEach(repo => {
            this.loadRepoActivityGraph(repo);
          });
        }, 500); // Small delay to ensure DOM is ready
        
        // Bind import events
        $('.import-github-project').on('click', (e) => {
          const repoData = JSON.parse($(e.currentTarget).data('repo'));
          this.importGitHubProject(repoData);
        });
      }
      
      filterGitHubProjects() {
        const filter = $('#githubFilter').val();
        const sort = $('#githubSort').val();
        const search = $('#githubSearch').val().toLowerCase();
        
        if (!this.githubRepos) return;
        
        let filteredRepos = [...this.githubRepos];
        
        // Apply filters
        if (filter === 'public') {
          filteredRepos = filteredRepos.filter(repo => !repo.private);
        } else if (filter === 'private') {
          filteredRepos = filteredRepos.filter(repo => repo.private);
        } else if (filter === 'forks') {
          filteredRepos = filteredRepos.filter(repo => repo.fork);
        } else if (filter === 'sources') {
          filteredRepos = filteredRepos.filter(repo => !repo.fork);
        }
        
        // Apply search
        if (search) {
          filteredRepos = filteredRepos.filter(repo => 
            repo.name.toLowerCase().includes(search) ||
            (repo.description && repo.description.toLowerCase().includes(search)) ||
            (repo.language && repo.language.toLowerCase().includes(search))
          );
        }
        
        // Apply sorting
        filteredRepos.sort((a, b) => {
          switch (sort) {
            case 'created':
              return new Date(b.created_at) - new Date(a.created_at);
            case 'name':
              return a.name.localeCompare(b.name);
            case 'stars':
              return b.stargazers_count - a.stargazers_count;
            case 'forks':
              return b.forks_count - a.forks_count;
            case 'updated':
            default:
              return new Date(b.updated_at) - new Date(a.updated_at);
          }
        });
        
        this.renderGitHubProjects(filteredRepos);
      }
      
      importGitHubProject(repoData) {
        // Convert GitHub repo to portfolio project format
        const project = {
          id: Date.now(),
          title: repoData.name.replace(/-/g, ' ').replace(/\b\w/g, l => l.toUpperCase()),
          description: repoData.description || `GitHub repository: ${repoData.name}`,
          category: this.detectProjectCategory(repoData),
          year: new Date(repoData.created_at).getFullYear(),
          status: 'completed',
          tools: this.extractTools(repoData),
          url: repoData.homepage || repoData.html_url,
          features: [
            `${repoData.stargazers_count} GitHub sterren`,
            `${repoData.forks_count} forks`,
            `Primaire taal: ${repoData.language || 'Onbekend'}`,
            `Laatst bijgewerkt: ${new Date(repoData.updated_at).toLocaleDateString('nl-NL')}`
          ],
          image: 'img/Logo.png',
          timeline: [],
          createdAt: repoData.created_at,
          updatedAt: new Date().toISOString(),
          githubRepo: repoData.full_name,
          githubUrl: repoData.html_url
        };
        
        // Check if project already exists
        const existingIndex = this.projects.findIndex(p => p.githubRepo === repoData.full_name);
        
        if (existingIndex >= 0) {
          if (confirm(`Project "${project.title}" bestaat al. Wil je het bijwerken?`)) {
            project.id = this.projects[existingIndex].id;
            project.createdAt = this.projects[existingIndex].createdAt;
            this.projects[existingIndex] = project;
            this.showAlert('GitHub project succesvol bijgewerkt!', 'success');
          }
        } else {
          this.projects.push(project);
          this.showAlert('GitHub project succesvol geïmporteerd!', 'success');
        }
        
        this.saveProjects();
        this.updateStats();
        this.renderProjects();
      }
      
      detectProjectCategory(repoData) {
        const name = repoData.name.toLowerCase();
        const description = (repoData.description || '').toLowerCase();
        const language = (repoData.language || '').toLowerCase();
        
        // Check for development keywords
        if (language.includes('javascript') || language.includes('html') || language.includes('css') || 
            language.includes('php') || language.includes('python') || language.includes('java') ||
            name.includes('app') || name.includes('website') || name.includes('web') ||
            description.includes('application') || description.includes('website') || description.includes('web')) {
          return 'development';
        }
        
        // Check for design keywords
        if (name.includes('design') || name.includes('ui') || name.includes('ux') ||
            description.includes('design') || description.includes('ui') || description.includes('ux')) {
          return 'design';
        }
        
        // Default to development for code repositories
        return 'development';
      }
      
      extractTools(repoData) {
        const tools = [];
        
        if (repoData.language) {
          tools.push(repoData.language);
        }
        
        // Add common web technologies based on repo name/description
        const content = `${repoData.name} ${repoData.description || ''}`.toLowerCase();
        
        if (content.includes('html')) tools.push('HTML');
        if (content.includes('css')) tools.push('CSS');
        if (content.includes('javascript') || content.includes('js')) tools.push('JavaScript');
        if (content.includes('bootstrap')) tools.push('Bootstrap');
        if (content.includes('jquery')) tools.push('jQuery');
        if (content.includes('react')) tools.push('React');
        if (content.includes('vue')) tools.push('Vue.js');
        if (content.includes('angular')) tools.push('Angular');
        if (content.includes('node')) tools.push('Node.js');
        if (content.includes('php')) tools.push('PHP');
        if (content.includes('mysql')) tools.push('MySQL');
        
        return [...new Set(tools)]; // Remove duplicates
      }
      
      syncGitHubProjects() {
        if (!this.githubRepos || this.githubRepos.length === 0) {
          this.showAlert('Laad eerst je GitHub projecten', 'danger');
          return;
        }
        
        let imported = 0;
        let updated = 0;
        
        this.githubRepos.forEach(repo => {
          if (!repo.fork && !repo.private) { // Only sync public, non-fork repos
            const existingIndex = this.projects.findIndex(p => p.githubRepo === repo.full_name);
            
            const project = {
              id: existingIndex >= 0 ? this.projects[existingIndex].id : Date.now() + Math.random(),
              title: repo.name.replace(/-/g, ' ').replace(/\b\w/g, l => l.toUpperCase()),
              description: repo.description || `GitHub repository: ${repo.name}`,
              category: this.detectProjectCategory(repo),
              year: new Date(repo.created_at).getFullYear(),
              status: 'completed',
              tools: this.extractTools(repo),
              url: repo.homepage || repo.html_url,
              features: [
                `${repo.stargazers_count} GitHub sterren`,
                `${repo.forks_count} forks`,
                `Primaire taal: ${repo.language || 'Onbekend'}`,
              ],
              image: 'img/Logo.png',
              timeline: [],
              createdAt: existingIndex >= 0 ? this.projects[existingIndex].createdAt : repo.created_at,
              updatedAt: new Date().toISOString(),
              githubRepo: repo.full_name,
              githubUrl: repo.html_url
            };
            
            if (existingIndex >= 0) {
              this.projects[existingIndex] = project;
              updated++;
            } else {
              this.projects.push(project);
              imported++;
            }
          }
        });
        
        this.saveProjects();
        this.updateStats();
        this.renderProjects();
        
        this.showAlert(`Sync compleet! ${imported} nieuwe projecten geïmporteerd, ${updated} projecten bijgewerkt`, 'success');
      }
      
      formatFileSize(bytes) {
        if (bytes === 0) return '0 B';
        const k = 1024;
        const sizes = ['B', 'KB', 'MB', 'GB'];
        const i = Math.floor(Math.log(bytes) / Math.log(k));
        return parseFloat((bytes / Math.pow(k, i)).toFixed(1)) + ' ' + sizes[i];
      }
      
      showGitHubLoading(show) {
        if (show) {
          $('#githubLoading').show();
          $('#githubProjectsList').hide();
        } else {
          $('#githubLoading').hide();
          $('#githubProjectsList').show();
        }
      }
      
      showGitHubError() {
        $('#githubProjectsList').html(`
          <div class="text-center text-muted py-5">
            <i class="lnr lnr-warning" style="font-size: 3rem; opacity: 0.3; color: #dc3545;"></i>
            <p class="mt-3">Fout bij laden van GitHub repositories</p>
            <small>Controleer je gebruikersnaam en internetverbinding</small>
          </div>
        `);
      }
      
      // Activity Graph Functions
      async loadRepoActivityGraph(repo) {
        const username = $('#githubUsername').val().trim();
        if (!username || !repo) return;
        
        try {
          const token = $('#githubToken').val() || localStorage.getItem('githubToken');
          const headers = {
            'Accept': 'application/vnd.github.v3+json',
            'User-Agent': 'Portfolio-Admin'
          };
          
          if (token) {
            headers['Authorization'] = `token ${token}`;
          }
          
          // First try the commit activity stats
          console.log(`Loading activity for ${repo.name}`);
          const statsResponse = await fetch(`https://api.github.com/repos/${username}/${repo.name}/stats/commit_activity`, { headers });
          
          if (statsResponse.ok) {
            const activityData = await statsResponse.json();
            
            if (activityData && activityData.length > 0) {
              this.renderActivityGraph(repo.name, activityData);
              return;
            }
          }
          
          // Fallback: Use recent commits to generate activity
          console.log(`Fallback: using commits for ${repo.name}`);
          await this.loadRepoActivityFromCommits(repo, username, headers);
          
        } catch (error) {
          console.error(`Error loading activity for ${repo.name}:`, error);
          await this.loadRepoActivityFromCommits(repo, username, headers);
        }
      }
      
      async loadRepoActivityFromCommits(repo, username, headers) {
        try {
          // Get commits from the last year
          const oneYearAgo = new Date();
          oneYearAgo.setFullYear(oneYearAgo.getFullYear() - 1);
          const since = oneYearAgo.toISOString();
          
          const commitsResponse = await fetch(
            `https://api.github.com/repos/${username}/${repo.name}/commits?since=${since}&per_page=100`, 
            { headers }
          );
          
          if (!commitsResponse.ok) {
            this.showActivityPlaceholder(repo.name);
            return;
          }
          
          const commits = await commitsResponse.json();
          
          if (!commits || commits.length === 0) {
            this.showActivityPlaceholder(repo.name);
            return;
          }
          
          // Process commits into weekly data
          const weeklyActivity = this.processCommitsIntoWeeklyData(commits);
          this.renderActivityGraphFromCommits(repo.name, weeklyActivity, commits.length);
          
        } catch (error) {
          console.error(`Fallback error for ${repo.name}:`, error);
          this.showActivityPlaceholder(repo.name);
        }
      }
      
      processCommitsIntoWeeklyData(commits) {
        const weeks = [];
        const now = new Date();
        
        // Generate 52 weeks of data
        for (let i = 51; i >= 0; i--) {
          const weekStart = new Date(now);
          weekStart.setDate(now.getDate() - (i * 7));
          weekStart.setHours(0, 0, 0, 0);
          
          const weekEnd = new Date(weekStart);
          weekEnd.setDate(weekStart.getDate() + 7);
          
          const weekCommits = commits.filter(commit => {
            const commitDate = new Date(commit.commit.author.date);
            return commitDate >= weekStart && commitDate < weekEnd;
          });
          
          weeks.push({
            week: weekStart,
            total: weekCommits.length
          });
        }
        
        return weeks;
      }
      
      renderActivityGraphFromCommits(repoName, weeklyData, totalCommits) {
        const container = document.getElementById(`graph-${repoName}`);
        if (!container) {
          console.log(`No container found for ${repoName}`);
          return;
        }
        
        console.log(`Rendering activity for ${repoName}:`, {
          weeks: weeklyData.length,
          totalCommits: totalCommits,
          weeklyData: weeklyData.slice(0, 5) // Show first 5 weeks for debugging
        });
        
        const maxCommits = Math.max(...weeklyData.map(week => week.total));
        
        // Create activity squares
        const activityHtml = weeklyData.map((week, index) => {
          const level = this.getActivityLevel(week.total, maxCommits);
          const dateStr = week.week.toLocaleDateString('nl-NL');
          return `<div class="activity-day level-${level}" title="${week.total} commits in week van ${dateStr}" data-commits="${week.total}" data-week="${index}"></div>`;
        }).join('');
        
        const avgCommits = totalCommits / 52;
        
        console.log(`Generated HTML length: ${activityHtml.length}`);
        
        container.innerHTML = `
          <div class="activity-graph">
            ${activityHtml}
          </div>
          <div class="activity-legend">
            <span>Minder</span>
            <div class="activity-legend-item">
              <div class="activity-legend-dot level-0"></div>
            </div>
            <div class="activity-legend-item">
              <div class="activity-legend-dot level-1"></div>
            </div>
            <div class="activity-legend-item">
              <div class="activity-legend-dot level-2"></div>
            </div>
            <div class="activity-legend-item">
              <div class="activity-legend-dot level-3"></div>
            </div>
            <div class="activity-legend-item">
              <div class="activity-legend-dot level-4"></div>
            </div>
            <span>Meer</span>
          </div>
          <div class="activity-stats">
            <div class="activity-stat">
              Totaal: <strong>${totalCommits} commits</strong>
            </div>
            <div class="activity-stat">
              Hoogste week: <strong>${maxCommits} commits</strong>
            </div>
            <div class="activity-stat">
              Gemiddeld: <strong>${Math.round(avgCommits * 10) / 10} commits/week</strong>
            </div>
          </div>
        `;
        
        // Debug: Check if elements were created
        const squares = container.querySelectorAll('.activity-day');
        console.log(`Created ${squares.length} activity squares for ${repoName}`);
      }
      
      renderActivityGraph(repoName, activityData) {
        const container = document.getElementById(`graph-${repoName}`);
        if (!container) return;
        
        // Create 52 weeks of activity data
        const weeks = [];
        const currentWeek = activityData[activityData.length - 1];
        
        // Generate activity graph data
        let totalCommits = 0;
        let maxCommits = 0;
        
        activityData.forEach(week => {
          const commits = week.total;
          totalCommits += commits;
          maxCommits = Math.max(maxCommits, commits);
          weeks.push(commits);
        });
        
        // Create activity squares
        const activityHtml = weeks.map(commits => {
          const level = this.getActivityLevel(commits, maxCommits);
          const date = new Date();
          return `<div class="activity-day level-${level}" title="${commits} commits deze week" data-commits="${commits}"></div>`;
        }).join('');
        
        container.innerHTML = `
          <div class="activity-graph">
            ${activityHtml}
          </div>
          <div class="activity-legend">
            <span>Minder</span>
            <div class="activity-legend-item">
              <div class="activity-legend-dot level-0"></div>
            </div>
            <div class="activity-legend-item">
              <div class="activity-legend-dot level-1"></div>
            </div>
            <div class="activity-legend-item">
              <div class="activity-legend-dot level-2"></div>
            </div>
            <div class="activity-legend-item">
              <div class="activity-legend-dot level-3"></div>
            </div>
            <div class="activity-legend-item">
              <div class="activity-legend-dot level-4"></div>
            </div>
            <span>Meer</span>
          </div>
          <div class="activity-stats">
            <div class="activity-stat">
              Totaal: <strong>${totalCommits} commits</strong>
            </div>
            <div class="activity-stat">
              Hoogste week: <strong>${maxCommits} commits</strong>
            </div>
            <div class="activity-stat">
              Gemiddeld: <strong>${Math.round(totalCommits / weeks.length)} commits/week</strong>
            </div>
          </div>
        `;
      }
      
      getActivityLevel(commits, maxCommits) {
        if (commits === 0) return 0;
        if (maxCommits === 0) return 0;
        
        const percentage = commits / maxCommits;
        if (percentage <= 0.25) return 1;
        if (percentage <= 0.5) return 2;
        if (percentage <= 0.75) return 3;
        return 4;
      }
      
      showActivityPlaceholder(repoName) {
        const container = document.getElementById(`graph-${repoName}`);
        if (!container) return;
        
        container.innerHTML = `
          <div class="text-center text-muted py-2">
            <small><i class="lnr lnr-clock"></i> Repository heeft geen recente commits of beperkte toegang</small>
          </div>
        `;
      }

      loadProjects() {
        const stored = localStorage.getItem('portfolioProjects');
        if (stored) {
          this.projects = JSON.parse(stored);
        }
      }

      saveProjects() {
        localStorage.setItem('portfolioProjects', JSON.stringify(this.projects));
      }

      saveProject() {
        const formData = new FormData($('#projectForm')[0]);
        const project = {
          id: Date.now(),
          title: formData.get('projectTitle') || $('#projectTitle').val(),
          description: formData.get('projectDescription') || $('#projectDescription').val(),
          category: formData.get('projectCategory') || $('#projectCategory').val(),
          year: formData.get('projectYear') || $('#projectYear').val(),
          status: formData.get('projectStatus') || $('#projectStatus').val(),
          tools: ($('#projectTools').val() || '').split(',').map(t => t.trim()).filter(t => t),
          url: $('#projectUrl').val(),
          features: ($('#projectFeatures').val() || '').split('\n').filter(f => f.trim()),
          image: $('#projectImagePath').val() || 'img/Logo.png',
          timeline: this.getTimelineData(),
          createdAt: new Date().toISOString(),
          updatedAt: new Date().toISOString()
        };

        if (this.editingIndex >= 0) {
          project.id = this.projects[this.editingIndex].id;
          project.createdAt = this.projects[this.editingIndex].createdAt;
          this.projects[this.editingIndex] = project;
          this.showAlert('Project succesvol bijgewerkt!', 'success');
        } else {
          this.projects.push(project);
          this.showAlert('Project succesvol toegevoegd!', 'success');
        }

        this.saveProjects();
        this.updateStats();
        this.renderProjects();
        this.resetForm();
      }

      getTimelineData() {
        const timeline = [];
        $('.timeline-entry').each(function() {
          const week = $(this).find('.timeline-week').val();
          const desc = $(this).find('.timeline-desc').val();
          if (week && desc) {
            timeline.push({ week, description: desc });
          }
        });
        return timeline;
      }

      editProject(index) {
        const project = this.projects[index];
        this.editingIndex = index;

        $('#projectTitle').val(project.title);
        $('#projectDescription').val(project.description);
        $('#projectCategory').val(project.category);
        $('#projectYear').val(project.year);
        $('#projectStatus').val(project.status);
        $('#projectTools').val(project.tools.join(', '));
        $('#projectUrl').val(project.url);
        $('#projectFeatures').val(project.features.join('\n'));
        $('#projectImagePath').val(project.image);

        // Update form title
        $('#formTitle').text('Project Bewerken');
        $('#submitText').text('Wijzigingen Opslaan');

        // Load timeline
        $('#timelineContainer').empty();
        project.timeline.forEach(item => {
          this.addTimelineEntry(item.week, item.description);
        });

        // Scroll to form
        $('html, body').animate({
          scrollTop: $('#projectForm').offset().top - 100
        }, 500);
      }

      deleteProject(index) {
        if (confirm('Weet je zeker dat je dit project wilt verwijderen?')) {
          this.projects.splice(index, 1);
          this.saveProjects();
          this.updateStats();
          this.renderProjects();
          this.showAlert('Project succesvol verwijderd!', 'success');
        }
      }

      resetForm() {
        $('#projectForm')[0].reset();
        $('#projectIndex').val('');
        $('#imagePreview').empty();
        $('#timelineContainer').html(`
          <div class="timeline-entry mb-3">
            <div class="row">
              <div class="col-md-4">
                <label class="form-label">Week/Fase</label>
                <input type="text" class="form-control timeline-week" placeholder="Week 1">
              </div>
              <div class="col-md-8">
                <label class="form-label">Beschrijving</label>
                <input type="text" class="form-control timeline-desc" placeholder="Wat werd er gedaan?">
              </div>
            </div>
          </div>
        `);
        
        this.editingIndex = -1;
        $('#formTitle').text('Nieuw Project Toevoegen');
        $('#submitText').text('Project Opslaan');
        $('#projectYear').val(new Date().getFullYear());
      }

      addTimelineEntry(week = '', desc = '') {
        const html = `
          <div class="timeline-entry mb-3">
            <div class="row">
              <div class="col-md-4">
                <label class="form-label">Week/Fase</label>
                <input type="text" class="form-control timeline-week" placeholder="Week 1" value="${week}">
              </div>
              <div class="col-md-7">
                <label class="form-label">Beschrijving</label>
                <input type="text" class="form-control timeline-desc" placeholder="Wat werd er gedaan?" value="${desc}">
              </div>
              <div class="col-md-1 d-flex align-items-end">
                <button type="button" class="btn btn-outline-danger btn-sm remove-timeline">
                  <i class="lnr lnr-trash"></i>
                </button>
              </div>
            </div>
          </div>
        `;
        $('#timelineContainer').append(html);

        // Bind remove event
        $('.remove-timeline').last().on('click', function() {
          $(this).closest('.timeline-entry').remove();
        });
      }

      handleImageUpload(file) {
        if (file) {
          const reader = new FileReader();
          reader.onload = (e) => {
            $('#imagePreview').html(`<img src="${e.target.result}" class="image-preview" alt="Preview">`);
          };
          reader.readAsDataURL(file);
        }
      }

      updateStats() {
        const total = this.projects.length;
        const dev = this.projects.filter(p => p.category === 'development').length;
        const design = this.projects.filter(p => p.category === 'design').length;
        const photo = this.projects.filter(p => p.category === 'photography').length;

        $('#totalProjects').text(total);
        $('#developmentProjects').text(dev);
        $('#designProjects').text(design);
        $('#photographyProjects').text(photo);
      }

      renderProjects() {
        const search = $('#searchProjects').val().toLowerCase();
        const category = $('#filterCategory').val();
        
        let filteredProjects = this.projects.filter(project => {
          const matchesSearch = !search || 
            project.title.toLowerCase().includes(search) ||
            project.description.toLowerCase().includes(search);
          const matchesCategory = !category || project.category === category;
          
          return matchesSearch && matchesCategory;
        });

        if (filteredProjects.length === 0) {
          $('#projectsList').html(`
            <div class="text-center text-muted py-5">
              <i class="lnr lnr-magnifier" style="font-size: 3rem; opacity: 0.3;"></i>
              <p class="mt-3">Geen projecten gevonden</p>
              <small>Probeer andere zoektermen of filters</small>
            </div>
          `);
          return;
        }

        const html = filteredProjects.map((project, index) => {
          const realIndex = this.projects.indexOf(project);
          const badgeClass = project.category === 'development' ? 'badge-development' :
                           project.category === 'design' ? 'badge-design' : 'badge-photography';
          
          return `
            <div class="project-item" data-index="${realIndex}">
              <div class="d-flex justify-content-between align-items-start mb-2">
                <h5 class="mb-1">${project.title}</h5>
                <div class="project-badges">
                  <span class="badge ${badgeClass}">${project.category}</span>
                  <span class="badge badge-date">${project.year}</span>
                </div>
              </div>
              
              <p class="text-muted mb-2">${project.description}</p>
              
              ${project.tools.length > 0 ? `
                <div class="mb-2">
                  ${project.tools.map(tool => `<span class="badge badge-tool me-1">${tool}</span>`).join('')}
                </div>
              ` : ''}
              
              <div class="d-flex justify-content-between align-items-center mt-3">
                <small class="text-muted">
                  <i class="lnr lnr-clock"></i>
                  ${new Date(project.updatedAt).toLocaleDateString('nl-NL')}
                </small>
                <div class="btn-group">
                  <button class="btn btn-info btn-sm edit-project" data-index="${realIndex}">
                    <i class="lnr lnr-pencil"></i>
                  </button>
                  <button class="btn btn-danger btn-sm delete-project" data-index="${realIndex}">
                    <i class="lnr lnr-trash"></i>
                  </button>
                </div>
              </div>
            </div>
          `;
        }).join('');

        $('#projectsList').html(html);

        // Bind edit/delete events
        $('.edit-project').on('click', (e) => {
          const index = $(e.target).closest('.edit-project').data('index');
          this.editProject(index);
        });

        $('.delete-project').on('click', (e) => {
          const index = $(e.target).closest('.delete-project').data('index');
          this.deleteProject(index);
        });
      }

      showAlert(message, type = 'success') {
        const alertClass = type === 'success' ? 'alert-success' : 'alert-danger';
        const icon = type === 'success' ? 'lnr-checkmark-circle' : 'lnr-warning';
        
        const html = `
          <div class="alert ${alertClass} alert-dismissible fade show" role="alert">
            <i class="${icon}"></i>
            ${message}
            <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
          </div>
        `;
        
        $('#alertContainer').html(html);
        
        // Auto hide after 5 seconds
        setTimeout(() => {
          $('.alert').fadeOut();
        }, 5000);
      }

      exportProjects() {
        const dataStr = JSON.stringify(this.projects, null, 2);
        const dataBlob = new Blob([dataStr], { type: 'application/json' });
        const url = URL.createObjectURL(dataBlob);
        const link = document.createElement('a');
        link.href = url;
        link.download = `portfolio-projects-${new Date().toISOString().split('T')[0]}.json`;
        link.click();
        URL.revokeObjectURL(url);
        
        this.showAlert('Projecten succesvol geëxporteerd!', 'success');
      }

      importProjects(file) {
        if (!file) return;
        
        const reader = new FileReader();
        reader.onload = (e) => {
          try {
            const importedProjects = JSON.parse(e.target.result);
            
            if (confirm('Wil je de huidige projecten vervangen of samenvoegen met de geïmporteerde?')) {
              // Replace
              this.projects = importedProjects;
            } else {
              // Merge
              this.projects = [...this.projects, ...importedProjects];
            }
            
            this.saveProjects();
            this.updateStats();
            this.renderProjects();
            this.showAlert('Projecten succesvol geïmporteerd!', 'success');
          } catch (error) {
            this.showAlert('Fout bij importeren: ongeldig bestandsformaat', 'danger');
          }
        };
        reader.readAsText(file);
      }
    }

    // Initialize when document is ready
    $(document).ready(() => {
      new ProjectManager();
    });
    
    } // End of authentication check
  </script>
</body>
</html>
